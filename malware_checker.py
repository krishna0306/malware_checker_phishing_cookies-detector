import requests
import re

# function to check if URL is malicious
def is_malicious(url):
    try: 
        response = requests.get(url, timeout=7)
        page_content = response.text
    except:
        return False
        
    # check for presence of viruses in the page content
    if re.search(r'malware|virus|trojan', page_content, re.IGNORECASE):
        return True
    
    # check for presence of cookies in the page content
    if re.search(r'cookie', page_content, re.IGNORECASE):
        return True
        
    
    # check if the URL is a known phishing site
    if "phishing" in url:
        return True
    else:
          return False
  

# main function to calculate the percentage of malicious URLs in a list
def calculate_percentage(urls):
    total_count = len(urls)
    malicious_count = 0
    
    for url in urls:
        if is_malicious(url):
            malicious_count += 1
    
    percentage = (malicious_count / total_count) * 100
    
    return percentage

# example usage
urls = [
    'https://www.gardensrestaurantandcatering.com',
    
]

percentage = calculate_percentage(urls)
print(f"Percentage of malicious URLs: {percentage}%")

